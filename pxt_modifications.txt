!   Modifications made by Pedro. S. Peixoto
!   Date: Dez 2015
!   Motivation: Add consistent scheme of Peixoto JCP 2015 to MPAS
!
!   All Modifications where marked with PXT text and a comment
!   All things that would be moved/removed was commented


* core_atmosphere/Registry : added new config on nhyd_model
                <nml_option name="config_consistent_scheme"          type="logical"       default_value="false"/>
                <nml_option name="config_KE_vecrecon_perot"          type="logical"       default_value="false"/>
                <nml_option name="config_KE_vecrecon_rbf"            type="logical"       default_value="false"/>
                <nml_option name="config_bary_interpol"              type="logical"       default_value="false"/>
                <nml_option name="config_consist_perp"               type="logical"       default_value="false"/>
                <nml_option name="config_holingsworth"               type="logical"       default_value="true"/>

* namelist.atmosphere : New parameter choices
	    config_consistent_scheme = true
    	    config_KE_vecrecon_perot = true
            config_KE_vecrecon_rbf = true
	    config_bary_interpol = true
	    config_consist_perp = true
	    config_holingsworth = true

     OBS:   config_consistent_scheme = true => 
	       config_KE_vecrecon_perot = config_bary_interpol = config_consist_perp = true
	       config_KE_vecrecon_rbf = false

* mpas_atm_core/atm_mpas_init_block
	- Added use mpas_consistent and a warning stating that for the consistent scheme it is recommended to be on HCm grid
	- Moved RBF initialization (mpas_init_reconstruct) to before solve_diagonstics
	- Added call mpas_initialize_vectors_general (new) to calculate normal/tangential vector for HCm grid
		(This makes it unecessary to call mpas_rbf_interp_initialize)
	- Moved RBF reconstruction to inside solve_diagnostics 


* atm_time_integration/atm_init_coupled_diagnostics 
	- Added calculation of barycentric coordinates on mass flux (ru) calculation to alow HCm (TODO)

* atm_time_integration/atm_compute_solve_diagnostics (TODO)
	- Added calculation of barycentric coordinates for h_edge (TODO)
	- Added vector reconstruction to cell centre - either Perot or RBF
	- Added new kinetic energy calculation, based on reconstructions 



* Variable declarations added

      !PXT additional flags
      logical, pointer :: config_consistent_scheme
      logical, pointer :: config_KE_vecrecon_perot
      logical, pointer :: config_KE_vecrecon_rbf
      logical, pointer :: config_bary_interpol
      logical, pointer :: config_consist_perp
      logical, pointer :: config_hollingsworth

* Variable calls from pool

      !PXT additional flags
      call mpas_pool_get_config(configs, 'config_consistent_scheme', config_consistent_scheme)
      call mpas_pool_get_config(configs, 'config_KE_vecrecon_perot', config_KE_vecrecon_perot)
      call mpas_pool_get_config(configs, 'config_KE_vecrecon_rbf', config_KE_vecrecon_rbf)
      call mpas_pool_get_config(configs, 'config_bary_interpol', config_bary_interpol)
      call mpas_pool_get_config(configs, 'config_consist_perp', config_consist_perp)
      call mpas_pool_get_config(configs, 'config_hollingsworth', config_hollingsworth)




